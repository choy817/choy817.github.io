---
layout: post
title: "[네트워크]DNS서버의 동작"
category: 네트워크
---

### DNS 서버의 기본 동작
---
리졸버가 DNS 서버를 조회할 때 세 가지 정보를 포함해서 보낸다   
- 이름   
서버나 메일주소 @뒷부분과 같은 이름   
- 클래스  
인터넷 외 네트워크 이용을 식별하기 위해 사용. 현재는 인터넷 이외의 네트워크는 소멸되었으므로 인터넷을 의미하는 IN값만 사용 중   
- 타입   
이름에 어떤 타입(종류)의 정보가 지원되는지 나타냄   
(ex. A = IP주소를 조회할 때, MX = 메일 배송 목적지를 조회할 때)

DNS 서버는 메세지 속에서 이름, 클래스, 타입 세 가지가 일치하는 것을 찾아서 IP값을 클라이언트에 회답한다   
&nbsp;

### 도메인의 계층
---
모든 정보를 한 대의 DNS 서버에 등록할 수는 없다. 만약 조회 요청 메세지를 받은 DNS 서버에 정보가 등록되어 있지 않다면?   
정보를 분산시켜서 다수의 DNS서버에 등록하고 다수의 DNS 서버가 연대하여 어디에 정보가 등록되어 있는지를 찾아낸다    
DNS 서버에서 등록한 정보는
- 도메인명이라는 계층적 구조를 가진 이름이 붙어있고    
- .을 기준으로 계층을 나누며   
- 가장 오른 쪽에 있는 것이 상위 계층을 나타낸다

>www.naver.com   

&nbsp;

### 담당 도메인 찾기
---
액세스 대상의 웹 서버가 어느 DNS서버에 등록되어 있는지는 어떻게 알아낼 수 있을까?   
인터넷에서는 DNS서버가 수만 대나 있으므로 모든 DNS 서버를 조회해 볼 수 없다. 그래서 하위 DNS서버의 IP주소를 상위 DNS서버에 등록하여 사용한다.   
    
- lab.glass.com이라는 도메인을 담당하는 DNS 서버를 glass.com의 DNS 서버에 등록한다
- glass.com의 DNS 서버를 com 도메인의 DNS 서버에 등록한다
- com의 DNS 서버를 루트 도메인의 DNS 서버에 등록한다   
- 루트 도메인의 DNS 서버를 인터넷에 존재하는 DNS 서버에 전부 등록한다. 그러면 어느 DNS 서버든지간에 루트 도메인에 액세스 할 수 있다.    

그럼 클라이언트가 어딘가의 DNS 서버에 액세스하더라도 루트 도메인을 경유하여 원하는 DNS 서버에 도착할 수 있다.   
&nbsp;

### 원하는 서버 찾아가기
---
www.naver.com 이라는 정보를 조회할 경우   
- 가장 가까운 DNS 서버에는 정보가 등록되어있지 않으므로 도메인 계층을 따라가 루트 도메인 DNS 서버에 조회 메세지를 전송한다   
- 루트 도메인에는 www.naver.com이라는 이름이 등록되어 있지 않지만 com도메인의 아래 있는 것을 확인, com 도메인의 DNS 서버 IP주소를 반송한다   
- com 도메인에도 이름이 없으므로 naver.com의 도메인 DNS 서버 IP 주소를 반송한다   
.   
.   
.   

이와 같이 위에서 아래로 DNS 서버를 따라가면 원하는 DNS 서버에 도달하게 되고, 그곳에서 응답 메세지를 받을 수 있다.